@use 'util/config' as u;
/** Topページ **/
// =====================================================
// MV: Golden Bokeh (CSS-only) for Snow Monkey Section
// Target HTML structure:
// <section class="... mv mv--abstract"> ... </section>
// =====================================================

// ---------- Variables ----------
$mv-text-max-width: 52rem;
$mv-radius: 24px;

$mv-pad-y: clamp(24px, 5vw, 72px);
$mv-inner-pad: clamp(18px, 3.5vw, 44px);
$mv-inner-ml: clamp(24px, 6vw, 80px);

$catch-size: clamp(28px, 4vw, 44px);
$sub-size: clamp(15px, 2vw, 18px);

$catch-shadow: 0 2px 14px rgba(0, 0, 0, 0.28);
$sub-shadow: 0 2px 10px rgba(0, 0, 0, 0.22);

// Sparkle tuning (final)
$sparkle-size: 26px; // user request: a bit bigger
$sparkle-opacity: 0.22;
$sparkle-blur: 1.8px;

// Animation timing (final)
$dur-bokeh: 12s;
$dur-sparkle: 14s;

// Breakpoint
$bp-md: 768px;

// ---------- Keyframes ----------
@keyframes bokehDrift {
	from {
		transform: translate3d(0, 0, 0) scale(1);
	}
	to {
		transform: translate3d(-1.2%, -0.8%, 0) scale(1.02);
	}
}

@keyframes sparkleFloat {
	0% {
		transform: translate3d(0, 0, 0) scale(1);
		opacity: 0.18;
	}
	50% {
		transform: translate3d(28px, -36px, 0) scale(1.35);
		opacity: 0.26;
	}
	100% {
		transform: translate3d(-18px, -68px, 0) scale(1.15);
		opacity: 0.2;
	}
}

// ---------- MV Base ----------
.mv.mv--abstract {
	position: relative;
	min-height: 100vh;
	overflow: hidden;
	display: grid;
	align-items: center;
	padding: $mv-pad-y;
	color: #fff;

	// Snow Monkey: alignfullでも中で .c-container による幅制限が入るので解除
	.c-container {
		max-width: none;
		padding-left: 0;
		padding-right: 0;
	}

	// Background: golden bokeh style (CSS-only)
	// NOTE: background layers are ordered top -> bottom
	background:
    // (NEW) Left-bottom brightness lift to avoid "green-ish" perception
		radial-gradient(
			70vmax 70vmax at 12% 85%,
			rgba(255, 255, 255, 0.22) 0%,
			rgba(255, 255, 255, 0.12) 35%,
			rgba(255, 255, 255, 0) 65%
		),
		// Right-top main light source
		radial-gradient(
				70vmax 60vmax at 88% 18%,
				rgba(255, 255, 255, 0.95) 0%,
				rgba(255, 244, 210, 0.55) 25%,
				rgba(255, 220, 120, 0.18) 52%,
				rgba(255, 210, 90, 0.06) 68%,
				rgba(255, 210, 90, 0) 78%
			),
		// Left-side "warm light haze" (split into multiple weak glows)
		radial-gradient(60vmax 60vmax at 6% 30%, rgba(255, 230, 170, 0.22) 0%, rgba(255, 230, 170, 0) 65%),
		radial-gradient(70vmax 70vmax at 14% 55%, rgba(255, 215, 140, 0.18) 0%, rgba(255, 215, 140, 0) 70%),
		radial-gradient(80vmax 80vmax at 22% 78%, rgba(255, 240, 190, 0.14) 0%, rgba(255, 240, 190, 0) 75%),
		// Base warm gradient
		linear-gradient(90deg, #6e7a22 0%, #b4a044 18%, #e5c067 42%, #f2d19a 65%, #fff3e2 100%);

	filter: saturate(1.05);

	// Large bokeh circles layer (animated)
	&::before {
		content: '';
		position: absolute;
		inset: -10%;
		pointer-events: none;
		z-index: 0;

		background:
			radial-gradient(circle at 22% 18%, rgba(255, 255, 255, 0.22) 0 10%, rgba(255, 255, 255, 0) 13%),
			radial-gradient(circle at 35% 25%, rgba(255, 255, 255, 0.18) 0 12%, rgba(255, 255, 255, 0) 16%),
			radial-gradient(circle at 48% 20%, rgba(255, 255, 255, 0.16) 0 11%, rgba(255, 255, 255, 0) 15%),
			radial-gradient(circle at 62% 38%, rgba(255, 255, 255, 0.14) 0 13%, rgba(255, 255, 255, 0) 18%),
			radial-gradient(circle at 70% 55%, rgba(255, 255, 255, 0.12) 0 14%, rgba(255, 255, 255, 0) 20%),
			radial-gradient(circle at 78% 76%, rgba(255, 255, 255, 0.16) 0 10%, rgba(255, 255, 255, 0) 14%),
			radial-gradient(circle at 64% 82%, rgba(255, 255, 255, 0.12) 0 9%, rgba(255, 255, 255, 0) 13%);

		filter: blur(10px);
		opacity: 0.95;

		will-change: transform;
		animation: bokehDrift $dur-bokeh ease-in-out infinite alternate;
	}

	// Text block
	.mv__inner {
		position: relative;
		z-index: 2;

		max-width: $mv-text-max-width;
		margin-left: $mv-inner-ml;
		margin-right: $mv-inner-ml;

		// Only under text: readability backing (not global dark overlay)
		background: radial-gradient(circle at 35% 45%, rgba(0, 0, 0, 0.28), rgba(0, 0, 0, 0) 62%);

		padding: $mv-inner-pad;
		border-radius: $mv-radius;
	}

	.mv__catch {
		margin: 0 0 10px;
		font-weight: 500; // readability priority
		line-height: 1.35;
		letter-spacing: 0.04em;
		font-size: $catch-size;
		text-shadow: $catch-shadow;
	}

	.mv__sub {
		margin: 0;
		font-weight: 500;
		line-height: 1.7;
		letter-spacing: 0.03em;
		font-size: $sub-size;
		text-shadow: $sub-shadow;
		opacity: 0.95;
	}

	// Sparkles (small bokeh lights)
	.mv__sparkle {
		position: absolute;
		z-index: 1;
		pointer-events: none;
		border-radius: 999px;

		width: $sparkle-size;
		height: $sparkle-size;

		background: radial-gradient(circle, rgba(255, 255, 255, 0.7), rgba(255, 255, 255, 0) 70%);

		filter: blur($sparkle-blur);
		opacity: $sparkle-opacity;

		// makes it "glow" naturally on bright background
		mix-blend-mode: screen;

		will-change: transform, opacity;
		animation: sparkleFloat $dur-sparkle ease-in-out infinite alternate;
	}

	// Placement (fine-tuned: left/center focus; right-top is main light source)
	.mv__sparkle--1 {
		left: 10%;
		top: 22%;
		animation-duration: 13s;
		animation-delay: -6s;
	}
	.mv__sparkle--2 {
		left: 22%;
		top: 38%;
		animation-duration: 15s;
		animation-delay: -16s;
	}
	.mv__sparkle--3 {
		left: 34%;
		top: 18%;
		animation-duration: 14s;
		animation-delay: -10s;
	}
	.mv__sparkle--4 {
		left: 48%;
		top: 32%;
		animation-duration: 16s;
		animation-delay: -22s;
	}
	.mv__sparkle--5 {
		left: 18%;
		top: 70%;
		animation-duration: 14s;
		animation-delay: -12s;
	}
	.mv__sparkle--6 {
		left: 56%;
		top: 78%;
		animation-duration: 18s;
		animation-delay: -26s;
	}

	// Optional: add slight size variation for natural look
	.mv__sparkle--2,
	.mv__sparkle--4 {
		width: 30px;
		height: 30px;
		opacity: 0.2;
	}
	.mv__sparkle--5 {
		width: 24px;
		height: 24px;
	}

	// Responsive: reduce sparkles count on SP
	@media (max-width: $bp-md) {
		min-height: 90vh;

		.mv__sparkle--5,
		.mv__sparkle--6 {
			display: none;
		}
	}

	// Motion accessibility
	@media (prefers-reduced-motion: reduce) {
		&::before,
		.mv__sparkle {
			animation: none !important;
		}
	}
}
